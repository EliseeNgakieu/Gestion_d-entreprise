<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion d'Entreprise - Suivi des Tâches et Responsabilités</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Composant Button
        function Button({ children, variant = "default", className = "", onClick, type = "button", ...props }) {
            const baseClasses = "px-4 py-2 rounded-lg font-medium transition-all cursor-pointer";
            const variantClasses = {
                ghost: "hover:bg-green-50 text-green-700",
                default: "bg-green-600 hover:bg-green-700 text-white shadow-md hover:shadow-lg",
                outline: "border-2 border-green-600 text-green-700 hover:bg-green-50",
                danger: "bg-red-600 hover:bg-red-700 text-white shadow-md hover:shadow-lg"
            };
            const classes = `${baseClasses} ${variantClasses[variant] || variantClasses.default} ${className}`;
            
            return (
                <button type={type} className={classes} onClick={onClick} {...props}>
                    {children}
                </button>
            );
        }

        // Composant Card
        function Card({ children, className = "", ...props }) {
            return (
                <div className={`bg-white rounded-lg ${className}`} {...props}>
                    {children}
                </div>
            );
        }

        // Composant Badge pour les statuts
        function Badge({ children, status }) {
            const colors = {
                pending: "bg-yellow-100 text-yellow-800",
                in_progress: "bg-blue-100 text-blue-800",
                completed: "bg-green-100 text-green-800",
                cancelled: "bg-red-100 text-red-800",
                high: "bg-red-100 text-red-800",
                medium: "bg-yellow-100 text-yellow-800",
                low: "bg-green-100 text-green-800"
            };
            
            return (
                <span className={`px-3 py-1 rounded-full text-xs font-semibold ${colors[status] || colors.pending}`}>
                    {children}
                </span>
            );
        }

        // Page de suivi des tâches
        function TaskManagement() {
            const [activeTab, setActiveTab] = useState("create"); // "create" ou "dashboard"
            const [tasks, setTasks] = useState([]);
            const [employees, setEmployees] = useState([]);
            const [formData, setFormData] = useState({
                title: "",
                description: "",
                assignedTo: "",
                priority: "medium",
                dueDate: "",
                status: "pending",
                category: ""
            });
            const [filterStatus, setFilterStatus] = useState("all");
            const [filterPriority, setFilterPriority] = useState("all");

            useEffect(() => {
                loadData();
            }, []);

            function loadData() {
                try {
                    const storedTasks = JSON.parse(localStorage.getItem("tasks") || "[]");
                    const storedEmployees = JSON.parse(localStorage.getItem("employees") || "[]");
                    setTasks(storedTasks);
                    setEmployees(storedEmployees);
                } catch (error) {
                    console.error("Erreur lors du chargement des données :", error);
                }
            }

            function handleChange(e) {
                const { name, value } = e.target;
                setFormData({
                    ...formData,
                    [name]: value
                });
            }

            function handleSubmit(e) {
                e.preventDefault();
                
                const assignedEmployee = employees.find(emp => String(emp.id) === formData.assignedTo);
                
                const newTask = {
                    id: Date.now(),
                    title: formData.title,
                    description: formData.description,
                    assignedTo: formData.assignedTo,
                    assignedToName: assignedEmployee ? assignedEmployee.fullName : "Non assigné",
                    priority: formData.priority,
                    dueDate: formData.dueDate,
                    status: formData.status,
                    category: formData.category,
                    createdAt: new Date().toISOString(),
                    updatedAt: new Date().toISOString()
                };

                const updated = [...tasks, newTask];
                setTasks(updated);
                localStorage.setItem("tasks", JSON.stringify(updated));
                
                alert("Tâche créée avec succès !");
                setFormData({
                    title: "",
                    description: "",
                    assignedTo: "",
                    priority: "medium",
                    dueDate: "",
                    status: "pending",
                    category: ""
                });
            }

            function updateTaskStatus(taskId, newStatus) {
                const updated = tasks.map(task => 
                    task.id === taskId 
                        ? { ...task, status: newStatus, updatedAt: new Date().toISOString() }
                        : task
                );
                setTasks(updated);
                localStorage.setItem("tasks", JSON.stringify(updated));
            }

            function deleteTask(taskId) {
                if (!confirm("Êtes-vous sûr de vouloir supprimer cette tâche ?")) return;
                const updated = tasks.filter(task => task.id !== taskId);
                setTasks(updated);
                localStorage.setItem("tasks", JSON.stringify(updated));
            }

            // Statistiques pour le tableau de bord
            const stats = {
                total: tasks.length,
                pending: tasks.filter(t => t.status === "pending").length,
                inProgress: tasks.filter(t => t.status === "in_progress").length,
                completed: tasks.filter(t => t.status === "completed").length,
                highPriority: tasks.filter(t => t.priority === "high" && t.status !== "completed").length,
                overdue: tasks.filter(t => {
                    if (!t.dueDate || t.status === "completed") return false;
                    return new Date(t.dueDate) < new Date();
                }).length
            };

            // Filtrage des tâches
            let filteredTasks = tasks;
            if (filterStatus !== "all") {
                filteredTasks = filteredTasks.filter(t => t.status === filterStatus);
            }
            if (filterPriority !== "all") {
                filteredTasks = filteredTasks.filter(t => t.priority === filterPriority);
            }

            // Tri par date d'échéance
            filteredTasks = [...filteredTasks].sort((a, b) => {
                if (!a.dueDate) return 1;
                if (!b.dueDate) return -1;
                return new Date(a.dueDate) - new Date(b.dueDate);
            });

            // Détection de l'onglet depuis l'URL
            useEffect(() => {
                const params = new URLSearchParams(window.location.search);
                const tab = params.get("tab");
                if (tab === "dashboard") {
                    setActiveTab("dashboard");
                }
            }, []);

            return (
                <div className="min-h-screen bg-gradient-to-br from-green-50 via-white to-green-50 py-10 px-4">
                    <div className="max-w-7xl mx-auto">
                        {/* Header */}
                        <div className="text-center mb-8">
                            <div className="inline-flex items-center gap-2 bg-green-100 text-green-700 px-4 py-2 rounded-full text-sm font-semibold mb-4">
                                <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                                </svg>
                                Gestion des Tâches
                            </div>
                            <h1 className="text-4xl font-bold text-green-800 mb-2">Suivi des Tâches et Responsabilités</h1>
                            <p className="text-green-600">Créez, assignez et suivez la progression des tâches</p>
                        </div>

                        {/* Navigation Tabs */}
                        <div className="flex gap-2 mb-6 bg-white p-2 rounded-xl shadow-md border border-green-100">
                            <button
                                onClick={() => setActiveTab("create")}
                                className={`flex-1 px-6 py-3 rounded-lg font-semibold transition-all ${
                                    activeTab === "create"
                                        ? "bg-green-600 text-white shadow-md"
                                        : "text-green-700 hover:bg-green-50"
                                }`}
                            >
                                <span className="flex items-center justify-center gap-2">
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                                    </svg>
                                    Créer une Tâche
                                </span>
                            </button>
                            <button
                                onClick={() => setActiveTab("dashboard")}
                                className={`flex-1 px-6 py-3 rounded-lg font-semibold transition-all ${
                                    activeTab === "dashboard"
                                        ? "bg-green-600 text-white shadow-md"
                                        : "text-green-700 hover:bg-green-50"
                                }`}
                            >
                                <span className="flex items-center justify-center gap-2">
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                    </svg>
                                    Tableau de Bord
                                </span>
                            </button>
                        </div>

                        {/* Formulaire Création de Tâche */}
                        {activeTab === "create" && (
                            <Card className="shadow-xl border border-green-100 backdrop-blur-sm bg-white/95">
                                <div className="p-8">
                                    <h2 className="text-2xl font-bold text-green-700 mb-6 flex items-center gap-2">
                                        <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                                        </svg>
                                        Créer une Nouvelle Tâche
                                    </h2>
                                    <form onSubmit={handleSubmit} className="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div className="md:col-span-2">
                                            <label className="block text-sm font-semibold text-green-700 mb-2">
                                                <span className="flex items-center gap-2">
                                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                                                    </svg>
                                                    Titre de la tâche *
                                                </span>
                                            </label>
                                            <input
                                                type="text"
                                                name="title"
                                                value={formData.title}
                                                onChange={handleChange}
                                                className="w-full px-4 py-3 rounded-xl border-2 border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all"
                                                placeholder="Ex: Finaliser le rapport mensuel"
                                                required
                                            />
                                        </div>

                                        <div className="md:col-span-2">
                                            <label className="block text-sm font-semibold text-green-700 mb-2">
                                                Description
                                            </label>
                                            <textarea
                                                name="description"
                                                value={formData.description}
                                                onChange={handleChange}
                                                rows="4"
                                                className="w-full px-4 py-3 rounded-xl border-2 border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all resize-none"
                                                placeholder="Détails de la tâche..."
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-green-700 mb-2">
                                                <span className="flex items-center gap-2">
                                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                                    </svg>
                                                    Assigner à
                                                </span>
                                            </label>
                                            <select
                                                name="assignedTo"
                                                value={formData.assignedTo}
                                                onChange={handleChange}
                                                className="w-full px-4 py-3 rounded-xl border-2 border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all bg-white"
                                            >
                                                <option value="">Non assigné</option>
                                                {employees.map(emp => (
                                                    <option key={emp.id} value={emp.id}>{emp.fullName} - {emp.jobTitle || "Sans poste"}</option>
                                                ))}
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-green-700 mb-2">
                                                <span className="flex items-center gap-2">
                                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 10V3L4 14h7v7l9-11h-7z" />
                                                    </svg>
                                                    Priorité *
                                                </span>
                                            </label>
                                            <select
                                                name="priority"
                                                value={formData.priority}
                                                onChange={handleChange}
                                                className="w-full px-4 py-3 rounded-xl border-2 border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all bg-white"
                                                required
                                            >
                                                <option value="low">Basse</option>
                                                <option value="medium">Moyenne</option>
                                                <option value="high">Haute</option>
                                            </select>
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-green-700 mb-2">
                                                <span className="flex items-center gap-2">
                                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                    </svg>
                                                    Date d'échéance
                                                </span>
                                            </label>
                                            <input
                                                type="date"
                                                name="dueDate"
                                                value={formData.dueDate}
                                                onChange={handleChange}
                                                className="w-full px-4 py-3 rounded-xl border-2 border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all"
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-green-700 mb-2">
                                                <span className="flex items-center gap-2">
                                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z" />
                                                    </svg>
                                                    Catégorie
                                                </span>
                                            </label>
                                            <input
                                                type="text"
                                                name="category"
                                                value={formData.category}
                                                onChange={handleChange}
                                                className="w-full px-4 py-3 rounded-xl border-2 border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all"
                                                placeholder="Ex: Marketing, Développement..."
                                            />
                                        </div>

                                        <div>
                                            <label className="block text-sm font-semibold text-green-700 mb-2">
                                                Statut initial
                                            </label>
                                            <select
                                                name="status"
                                                value={formData.status}
                                                onChange={handleChange}
                                                className="w-full px-4 py-3 rounded-xl border-2 border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent transition-all bg-white"
                                            >
                                                <option value="pending">En attente</option>
                                                <option value="in_progress">En cours</option>
                                                <option value="completed">Terminée</option>
                                            </select>
                                        </div>

                                        <div className="md:col-span-2 flex justify-end gap-4 mt-6">
                                            <Button
                                                type="button"
                                                variant="outline"
                                                onClick={() => setFormData({
                                                    title: "",
                                                    description: "",
                                                    assignedTo: "",
                                                    priority: "medium",
                                                    dueDate: "",
                                                    status: "pending",
                                                    category: ""
                                                })}
                                            >
                                                Réinitialiser
                                            </Button>
                                            <Button type="submit">
                                                <span className="flex items-center gap-2">
                                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 13l4 4L19 7" />
                                                    </svg>
                                                    Créer la Tâche
                                                </span>
                                            </Button>
                                        </div>
                                    </form>
                                </div>
                            </Card>
                        )}

                        {/* Tableau de Bord */}
                        {activeTab === "dashboard" && (
                            <div className="space-y-6">
                                {/* Statistiques */}
                                <div className="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4">
                                    <Card className="p-4 border-l-4 border-green-500">
                                        <p className="text-xs text-green-600 uppercase mb-1">Total</p>
                                        <p className="text-2xl font-bold text-green-700">{stats.total}</p>
                                    </Card>
                                    <Card className="p-4 border-l-4 border-yellow-500">
                                        <p className="text-xs text-yellow-600 uppercase mb-1">En attente</p>
                                        <p className="text-2xl font-bold text-yellow-700">{stats.pending}</p>
                                    </Card>
                                    <Card className="p-4 border-l-4 border-blue-500">
                                        <p className="text-xs text-blue-600 uppercase mb-1">En cours</p>
                                        <p className="text-2xl font-bold text-blue-700">{stats.inProgress}</p>
                                    </Card>
                                    <Card className="p-4 border-l-4 border-green-500">
                                        <p className="text-xs text-green-600 uppercase mb-1">Terminées</p>
                                        <p className="text-2xl font-bold text-green-700">{stats.completed}</p>
                                    </Card>
                                    <Card className="p-4 border-l-4 border-red-500">
                                        <p className="text-xs text-red-600 uppercase mb-1">Priorité haute</p>
                                        <p className="text-2xl font-bold text-red-700">{stats.highPriority}</p>
                                    </Card>
                                    <Card className="p-4 border-l-4 border-orange-500">
                                        <p className="text-xs text-orange-600 uppercase mb-1">En retard</p>
                                        <p className="text-2xl font-bold text-orange-700">{stats.overdue}</p>
                                    </Card>
                                </div>

                                {/* Filtres */}
                                <Card className="p-4 shadow-md border border-green-100">
                                    <div className="flex flex-wrap gap-4 items-center">
                                        <div className="flex items-center gap-2">
                                            <label className="text-sm font-semibold text-green-700">Statut:</label>
                                            <select
                                                value={filterStatus}
                                                onChange={(e) => setFilterStatus(e.target.value)}
                                                className="px-3 py-2 rounded-lg border border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400"
                                            >
                                                <option value="all">Tous</option>
                                                <option value="pending">En attente</option>
                                                <option value="in_progress">En cours</option>
                                                <option value="completed">Terminées</option>
                                                <option value="cancelled">Annulées</option>
                                            </select>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <label className="text-sm font-semibold text-green-700">Priorité:</label>
                                            <select
                                                value={filterPriority}
                                                onChange={(e) => setFilterPriority(e.target.value)}
                                                className="px-3 py-2 rounded-lg border border-green-200 focus:outline-none focus:ring-2 focus:ring-green-400"
                                            >
                                                <option value="all">Toutes</option>
                                                <option value="high">Haute</option>
                                                <option value="medium">Moyenne</option>
                                                <option value="low">Basse</option>
                                            </select>
                                        </div>
                                    </div>
                                </Card>

                                {/* Liste des Tâches */}
                                {filteredTasks.length === 0 ? (
                                    <Card className="shadow-xl border border-green-100 p-12 text-center">
                                        <svg className="w-16 h-16 text-green-300 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                                        </svg>
                                        <p className="text-green-600 text-lg">Aucune tâche trouvée</p>
                                        <p className="text-green-500 text-sm mt-2">Créez votre première tâche en cliquant sur "Créer une Tâche"</p>
                                    </Card>
                                ) : (
                                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                        {filteredTasks.map(task => {
                                            const isOverdue = task.dueDate && new Date(task.dueDate) < new Date() && task.status !== "completed";
                                            const statusLabels = {
                                                pending: "En attente",
                                                in_progress: "En cours",
                                                completed: "Terminée",
                                                cancelled: "Annulée"
                                            };
                                            const priorityLabels = {
                                                high: "Haute",
                                                medium: "Moyenne",
                                                low: "Basse"
                                            };
                                            
                                            return (
                                                <Card key={task.id} className={`shadow-lg border border-green-100 hover:shadow-xl transition-all ${isOverdue ? 'border-red-300 bg-red-50' : ''}`}>
                                                    <div className="p-6">
                                                        <div className="flex items-start justify-between mb-4">
                                                            <div className="flex-1">
                                                                <h3 className="text-lg font-bold text-green-800 mb-2">{task.title}</h3>
                                                                {task.category && (
                                                                    <span className="text-xs text-green-600 bg-green-50 px-2 py-1 rounded">
                                                                        {task.category}
                                                                    </span>
                                                                )}
                                                            </div>
                                                            <button
                                                                onClick={() => deleteTask(task.id)}
                                                                className="text-red-500 hover:text-red-700 transition"
                                                            >
                                                                <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                                                                </svg>
                                                            </button>
                                                        </div>

                                                        {task.description && (
                                                            <p className="text-sm text-green-700 mb-4 line-clamp-2">{task.description}</p>
                                                        )}

                                                        <div className="space-y-2 mb-4">
                                                            <div className="flex items-center justify-between">
                                                                <span className="text-xs text-green-600">Statut:</span>
                                                                <Badge status={task.status}>{statusLabels[task.status]}</Badge>
                                                            </div>
                                                            <div className="flex items-center justify-between">
                                                                <span className="text-xs text-green-600">Priorité:</span>
                                                                <Badge status={task.priority}>{priorityLabels[task.priority]}</Badge>
                                                            </div>
                                                            {task.assignedToName && (
                                                                <div className="flex items-center gap-2 text-xs text-green-600">
                                                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                                                                    </svg>
                                                                    {task.assignedToName}
                                                                </div>
                                                            )}
                                                            {task.dueDate && (
                                                                <div className={`flex items-center gap-2 text-xs ${isOverdue ? 'text-red-600 font-semibold' : 'text-green-600'}`}>
                                                                    <svg className="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                                    </svg>
                                                                    {isOverdue && "⚠️ "}
                                                                    {new Date(task.dueDate).toLocaleDateString('fr-FR')}
                                                                </div>
                                                            )}
                                                        </div>

                                                        <div className="flex gap-2 flex-wrap">
                                                            {task.status !== "pending" && (
                                                                <Button
                                                                    variant="outline"
                                                                    className="text-xs py-1 px-2"
                                                                    onClick={() => updateTaskStatus(task.id, "pending")}
                                                                >
                                                                    En attente
                                                                </Button>
                                                            )}
                                                            {task.status !== "in_progress" && (
                                                                <Button
                                                                    variant="outline"
                                                                    className="text-xs py-1 px-2"
                                                                    onClick={() => updateTaskStatus(task.id, "in_progress")}
                                                                >
                                                                    En cours
                                                                </Button>
                                                            )}
                                                            {task.status !== "completed" && (
                                                                <Button
                                                                    className="text-xs py-1 px-2"
                                                                    onClick={() => updateTaskStatus(task.id, "completed")}
                                                                >
                                                                    Terminer
                                                                </Button>
                                                            )}
                                                        </div>
                                                    </div>
                                                </Card>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<TaskManagement />);
    </script>
</body>
</html>

